var signals=function(g,c){"use strict";var a=[],j,h,d,b,m,l,e,k="function",f,i;f=function(c,a,b){if(typeof c!==a)throw b||"Invalid argument.";};j=function(e){var d=b(e);if(a[d]===c)a[d]=[]};h=function(l,c,i){var h=b(l),d=0,j,e;if(c instanceof Array){j=c.length;for(d;d<j;d++){e=c[d];f(e,k,"Callback must be a function");a[h].push({callback:e,obj:i||g})}}else{f(c,k,"Callback must be a function");a[h].push({callback:c,obj:i||g})}};i=function(a){return function(b){d("broadcast",a,b)}};d=function(n,k,g){var f=b(k),h=a[f+":before"],j=a[f],i=a[f+":after"],d;if(j===c)return;if(n==="broadcast")d=m;else d=l;h&&e(h,d,g);e(j,d,g);i&&e(i,d,g)};e=function(b,d,c){for(var a=0,e=b.length;a<e;a+=1)d(b[a],c,b,a)};m=function(a,b){var c=a.obj,d=a.callback;g.setTimeout(function(){d.call(c,b)},0)};l=function(a,d,b,e){a!==c&&a.callback===d&&b.splice(e,1)};b=function(a){return a||"any"};return{subscribe:function(a,b,c){j(a);h(a,b,c)},broadcast:function(a,b){d("broadcast",a,b)},proxy:function(a){return i(a)},unsubscribe:function(a,b){d("unsubscribe",a,b)},isObservable:function(d){var e=b(d);return a[e]!==c},listenerCount:function(e){var f=b(e),d=a[f];return d!==c?d.length:0}}}(this)