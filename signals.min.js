var signals=function(h,c){"use strict";var a=[],g,f,e,b,j,i,d,k="function";g=function(e){var d=b(e);if(a[d]===c)a[d]=[]};f=function(d,c,f){if(typeof c!==k)throw"Callback must be a function";var e=b(d);a[e].push({callback:c,obj:f||h})};e=function(n,m,g){var f=b(m),h=a[f+":before"],l=a[f],k=a[f+":after"],e;if(l===c)return;if(n==="broadcast")e=j;else e=i;h&&d(h,e,g);d(l,e,g);k&&d(k,e,g)};d=function(b,d,c){var a=0,e=b.length;for(a;a<e;a+=1)d(b[a],c,b,a)};j=function(a,b){var c=a.obj,d=a.callback;h.setTimeout(function(){d.call(c,b)},0)};i=function(a,d,b,e){a!==c&&a.callback===d&&b.splice(e,1)};b=function(a){return a||"any"};return{subscribe:function(a,c,b){g(a);f(a,c,b)},broadcast:function(a,b){e("broadcast",a,b)},unsubscribe:function(a,b){e("unsubscribe",a,b)},isObservable:function(d){var e=b(d);return a[e]!==c},listenerCount:function(e){var f=b(e),d=a[f];return d!==c?d.length:0}}}(this)